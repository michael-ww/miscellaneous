# Steps
1. 了解问题并确定设计范围
这个产品要开发哪些特定功能？
这个产品有多少用户？
公司预计扩大规模的速度如何？3个月、6个月和1年后的预期规模是多少？
公司的技术栈是？可以利用哪些现有的服务来简化设计？
2. 提出高层次的设计方案并获得认同
想出一个初步的设计蓝图。征求反馈意见。把你的面试官当作队友，一起工作。许多优秀的面试官喜欢交谈和参与。
在白板或纸上画出关键组件的框图。这可能包括客户端（移动/网络）、API、网络服务器、数据存储、缓存、CDN、消息队列，等等。
做一些粗略计算，以评估你的蓝图是否符合规模限制。边想边说。在深入研究之前，如果进行粗略计算是必要的，请与你的面试官进行沟通交流。
3. 深入设计
就总体目标和功能范围达成一致
为整体设计草拟了一个高层次的蓝图
从面试官那里获得了对高层设计的反馈
根据她的反馈，对深入设计的重点区域有了一些初步想法
你应该与面试官合作，确定并优先考虑架构中的组件。值得强调的是，每次面试都是不同的。有时，面试官可能会暗示她喜欢专注于高层设计。 有时，对于资深候选人的面试，讨论可能会涉及系统性能特性，主要关注瓶颈和资源估算。在大多数情况下，面试官可能希望你深入了解某些系统组件的细节。 对于 URL 缩短器，深入探讨将长 URL 转换为短 URL 的哈希函数设计是一个有趣的话题。对于一个聊天系统来说，如何减少延迟以及如何支持在线/离线状态是两个有趣的话题。
4. 总结
面试官可能希望你找出系统的瓶颈，并讨论潜在的改进。千万不要说你的设计是完美的，没有什么可以改进的。总有一些东西是可以改进的。这是一个展示你的批判性思维的好机会，并留下一个好的最终印象。
给面试官回顾一下你的设计可能是有用的。如果你提出了几种解决方案，这一点就特别重要。在长时间的会话后，提醒面试官可能会有所帮助。
错误情况（服务器故障、网络丢失等）值得讨论。
运营问题也值得一提。如何监控指标和错误日志？系统如何推广？
如何处理下一个规模曲线也是一个有趣的话题。例如，如果你目前的设计支持100万用户，你需要做什么改变来支持1000万用户？
如果你有更多的时间，可以提出其他改进建议。

高性能架构设计：熟悉系统常见性能优化手段比如引入 读写分离、缓存、负载均衡、异步 等等。
高可用架构设计 ：CAP 理论和 BASE 理论、通过集群来提高系统整体稳定性、超时和重试机制、应对接口级故障：降级、熔断、限流、排队。
高扩展架构设计 ：说白了就是懂得如何拆分系统。你按照不同的思路来拆分软件系统，就会得到不同的架构。

## 分布式ID生成器
雪花算法：
符号位：1 位，它将始终为 0。这是为将来使用保留的。它可以潜在地用于区分有符号数和无符号数。
时间戳：41 位。自纪元或自定义纪元以来的毫秒数。我们使用 Twitter 雪花默认纪元 1288834974657，相当于 2010 年 11 月 4 日 01:42:54 UTC。
数据中心 ID：5 位，这给了我们32个数据中心。
机器 ID：5 位，每个数据中心有32台机器
序列号：12 位。对于在该机器/进程上生成的每个 ID，序列号都会递增 1。该数字每毫秒重置为 0。